<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="/main.css" />
    <title>D&D Flavor Generators</title>
    <script src="js/MonsterBuilder.js"></script>

</head>

<body>
    <header>
        <h1>D&D Flavor Generators</h1>
        <div id="breadcrumb">
            <nav style="background-color: black;" aria-label="breadcrumb">
                <ol style="background-color: black;" class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/index.html" style="color:white">Home</a></li>
                    <li class="breadcrumb-item"><a href="/character.html" style="color:white">Character</a></li>
                    <li class="breadcrumb-item"><a href="/tavern.html" style="color:white">Tavern</a></li>
                    <li class="breadcrumb-item"><a href="/world.html" style="color:white">World</a></li>
                    <li class="breadcrumb-item"><a href="/adventure.html" style="color:white">Adventure</a></li>
                    <li class="breadcrumb-item"><a href="/ather.html" style="color:white">Loot</a></li>
                    <li class="breadcrumb-item"><a href="/plot_hooks.html" style="color:white">Plot Hooks</a></li>
                    <li class="breadcrumb-item"><a href="/setting_builder.html" style="color:white">Setting Builder</a></li>
                    <li class="breadcrumb-item"><a href="/shopkeeper.html" style="color:white">Shopkeeper</a></li>
                    <li class="breadcrumb-item"><a href="/npc_interactions.html" style="color:white">NPC Interactions</a></li>
                    <li class="breadcrumb-item"><a href="/Feywilds.html" style="color:white">Feywilds</a></li>
                    <li class="breadcrumb-item"><a href="/ather.html" style="color:white">Ather</a></li>
                    <li style="font-weight: bold; color: red" class="breadcrumb-item active" aria-current="page">Monsters</a>
                    </li>
                </ol>
            </nav>
        </div>
    </header>



    <div class="container">
        <div class="row">
            <button class="col-2 btn btn-dark" type="button" onclick="reload()">Clear</button>
        </div>
        <div class="row" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
            This monster calulator is based on the guidelines given by WotC. 
        </div>
        <div class="row">
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <input type="range" min="1" max="20" value="1" step="1" class="slider" id="Level"> Level of Characters <b id="levelOutput" style="color: rgb(54, 10, 64);"></b></input>
            </div>
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <input type="range" min="1" max="15" value="1" step="1" class="slider" id="PCs"> Number of Characters <b id="pcOutput" style="color: rgb(54, 10, 64);"></b></input>
            </div>
        </div>
        <div class="row">
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <input type="range" min="1" max="20" value="1" step="1" class="slider" id="Monsters"> Number of Monsters <b id="monsterOutput" style="color: rgb(54, 10, 64);"></b></input>
            </div>
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <input type="range" min="1" max="4" value="1" step="1" class="slider" id="Difficulty">Difficulty <i>(1 is Easy, 4 is Deadly) </i><b id="difficultyOutput" style="color: rgb(54, 10, 64);"></b></input>
            </div>
        </div>    
        <div class="row">
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <p id="XPcount" >Encounter XP Amount: </p>
            </div>
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <p id="diffMod" >Per Monster Modifier: </p>
            </div>
        </div>
        <div class="row">
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <p id="Even" >Even XP Breakdown: </p>
            </div>
            <div class="col" style="border-style:double; border-width: 3px; border-color: rgb(54, 10, 64);">
                <p id="BandM">Boss and Minions:</p>
            </div>
        </div>


        <!--
        <div class="row">
            <button style="color: white;" class="col-2 btn btn-warning" type="button" onclick="inputAlt()">Alternate Reward</button>
            <div class="col" id="AlternateReward"></div>
        </div>
        -->

    </div>

    <footer>
        <p>Thanks for checking this out, please let me know how I can make it better! <a style="color: red;" href="https://www.reddit.com/user/seriousd6/">u/seriousd6</a> </p>
    </footer>
    
    <script>
        var level = document.getElementById("Level");
        var pcs = document.getElementById("PCs");
        var monsters = document.getElementById("Monsters");
        var difficulty = document.getElementById("Difficulty");
        var output = document.getElementById("levelOutput");
        var output2 = document.getElementById("pcOutput");
        var output3 = document.getElementById("monsterOutput");
        var output4 = document.getElementById("difficultyOutput");
        output.innerHTML = level.value;
        output2.innerHTML = pcs.value;
        output3.innerHTML = monsters.value;
        output4.innerHTML = difficulty.value;
        // Display the default slider value
        // Update the current slider value (each time you drag the slider handle)
        level.oninput = function() {
            output.innerHTML = this.value;
            checks()
        }
        pcs.oninput = function() {
            output2.innerHTML = this.value;
            checks()
        }
        monsters.oninput = function() {
            output3.innerHTML = this.value;
            checks()
        }
        difficulty.oninput = function() {
            output4.innerHTML = this.value;
            checks()
        }
        


        function checks(){
            let challengeArrays = [
                [/*Easy*/
                    25, 50, 75, 125, 250, 300, 350, 450, 550, 600, 800, 1000, 1100, 1250, 1400, 1600, 2000, 2100, 2400, 2800
                ],
                [/*Medium*/
                    50, 100, 150, 250, 500, 600, 750, 900, 1100, 1200, 1600, 2000, 2200, 2500, 2800, 3200, 3900, 4200, 4900, 5700,
                ],
                [/*Hard*/
                    75, 150, 225, 375, 750, 900, 1100, 1400, 1600, 1900, 2400, 3000, 3400, 3800, 4300, 4800, 5900, 6300, 7300, 8500,
                ],
                [/*Deadly*/
                    100, 200, 400, 500, 1100, 1400, 1700, 2100, 2400, 2800, 3600, 4500, 5100, 5700, 6400, 7200, 8800, 9500, 10900, 12700,
                ]

            ]
            const challengeRatingRewrite = {
                "CR" : [0,.12,.25,.5,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],
                "PB" : [2,2,2,2,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9],
                "AC" : [13,13,13,13,13,13,13,14,15,15,15,16,16,17,17,17,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19],
                "HPmin" : [1,7,36,50,71,86,101,116,131,145,161,176,191,206,221,236,251,266,281,296,311,326,341,356,401,446,491,536,581,626,671,716,761,806],
                "HPmax" : [6,35,49,70,85,100,115,130,145,160,175,190,205,220,235,250,265,280,295,310,325,340,355,400,445,490,535,580,625,670,715,760,805,850],
                "AtBon" : [3,3,3,3,3,3,4,5,6,6,6,7,7,7,8,8,8,8,8,9,10,10,10,10,11,11,11,12,12,12,13,13,13,14],
                "DPRmin" : [0,2,4,6,9,15,21,27,33,39,45,51,57,63,69,75,81,87,93,99,105,111,117,123,141,159,177,195,213,231,249,267,285,303],
                "DPRmax" : [1,3,5,8,14,20,26,32,38,44,50,56,62,68,74,80,86,92,98,104,110,116,122,140,158,176,194,212,230,248,266,284,302,320],
                "SaveDC" : [13,13,13,13,13,13,13,14,15,15,15,16,16,16,17,17,18,18,18,18,19,19,19,19,20,20,20,21,21,21,21,22,22,22,22,23],
                "XP": [10,25,50,100,200,450,700,1100,1800,2300,2900,3900,5000,5900,7200,8400,10000,11500,13000,15000,18000,20000,22000,25000,33000,41000,50000,62000,75000,90000,105000,120000,135000,155000]
            }
            
          
            function diffXpFinder(x,y){
                let diffArray = challengeArrays[x-1]
                return diffArray[y-1]
            }
            
            function xpModifier(numChars,numMons){
                let diffLoc=0
                if (numMons > 14) {
                    diffLoc +=6
                } else if (numMons > 10) {
                    diffLoc +=5
                } else if (numMons > 6) {
                    diffLoc +=4
                } else if (numMons >= 3 ) {
                    diffLoc +=3
                } else if (numMons == 2) {
                    diffLoc +=2
                } else if (numMons == 1) {
                    diffLoc +=1 
                }
                
                if (numChars <= 2 && diffLoc < 7){
                    diffLoc +=1
                } else if (numChars >= 6 && numMons == 1) {
                    diffLoc -=1
                }
                console.log(diffLoc)
                let diffArray = [/*0*/.5,/*1*/1,/*2*/1.5,/*3*/2,/*4*/2.5,/*5*/3,/*6*/4,/*7*/5]
                return diffArray[diffLoc]
            }
            
            function evenBreakdown(numMons,xp,xpmod){
                return `${Math.floor(xp/(numMons*xpmod))}`
            }
            function bossAndMinions(numMons,xp,xpmod){
                if (numMons-1 === 0) {
                    return `Boss XP: ${xp}`
                } else {
                    return `Boss XP: ${Math.floor(xp/2)}, Minions XP: ${Math.floor((xp/2)/((numMons-1)*xpmod))}`
                }
                
            }

            output5 = pcs.value * diffXpFinder(difficulty.value,level.value)
            document.getElementById("XPcount").innerHTML = "Encounter XP Amount: " + output5 +" XP"
            
            output6 = xpModifier(pcs.value,monsters.value)
            document.getElementById("diffMod").innerHTML = "Per Monster Modifier: x"+ output6
            
            output7 =  diffXpFinder(difficulty.value,level.value)
            document.getElementById("Even").innerHTML = `Even XP Breakdown: ${evenBreakdown(monsters.value,output5,output6)}`

            output8 =  diffXpFinder(difficulty.value,level.value)
            document.getElementById("BandM").innerHTML = `${bossAndMinions(monsters.value,output5,output6)}`







            /*



            function bigRocks(xp,xnuMon,xpcs){
                let counter = xp
                let xpMod = xpModifier(xpcs,xnuMon)
                let monCount = xnuMon
                let monsterArray = []
                
                for (let i = challengeRatingRewrite.XP.length - 1; i >-1,counter>9; i--){
                    if (counter - challengeRatingRewrite.XP[i]*xpMod > 0) {
                        monsterArray.push(challengeRatingRewrite.CR[i])
                        monCount --
                        counter - challengeRatingRewrite.XP[i]*xpMod
                    } else {

                    }
                }
                
                
                const uniqueCount = {};
                    for (const element of monsterArray) {
                        if (uniqueCount[element]) {
                            uniqueCount[element] += 1;
                        } else {
                            uniqueCount[element] = 1;
                        }
                    }
                return monsterArray
            }

            

            
            function evenDistribution(xp,nuMon){
                let xpArray = challengeRatingRewrite.XP
                let counter = xp
                let monsters = nuMon
                let Monsters = []
                while (counter > 9) {
                    
                }
            }
            */

        }
        

        /*function inputGold() {
            document.getElementById("Reward").innerHTML = calculateGold(Number(level.value), Number(fights.value))
        }

        function inputAlt() {
            alternateRewards(Number(level.value), Number(fights.value))
        }*/
    </script>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js " integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js " integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo " crossorigin="anonymous "></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js " integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI " crossorigin="anonymous "></script>

</body>

</html>